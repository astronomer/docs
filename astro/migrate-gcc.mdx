---
sidebar_label: 'Migrate to Astro from GCC'
title: 'Migrating to Astro from GCC'
id: migrate-gcc
description: Get started on Astro by migrating your Airflow code from Google Cloud Composer (GCC).
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import MigrationSteps from './_migration-setup.mdx';


This is where you'll find instructions for migrating to Astro from Google Cloud Composer (GCC).

To complete the migration process, you will:

- Prepare your source Airflow environment and setup your Astro Airflow environment.
- Migrate metadata from your source Airflow environment.
- Migrate DAGs and additional Airflow components.
- Cut over your workflows from GCC to Astro.

## Prerequisites

This process should be undertaken with assistance from your Astronomer Data Engineer, and these steps should be started after your cluster has been activated. [Networking connectivity](connect-aws.md) should already be established during activation, and an [IDP should already be configured](configure-idp.md) if it is desired. Contact your Astronomer  representative if this is not the case.

### Requirements

To complete this guide, you will need:
- Access to your Astro organization and the [ability to create workspaces](manage-workspaces.md)
- `astro` CLI is [installed](cli/install-cli.md) and [configured](log-in-to-astro.md)
    - *note that* the `astro` CLI requires a functional `docker` installation
- Access to the source Airflow environment to migrate
    - you can utilize cloud provider CLIs such as `aws` and `gcloud` to expedite some steps in this guide
    - *note that* you may also need access to a cloud storage bucket utilized by the source environment
- Read access to any source control supporting your source Airflow environment (e.g. Github)
- Create access for new source control repositories for your new Astro Airflow
- Access to Secrets Backend credentials, *if in use in the source Airflow*
- Administrative access to create new CI/CD, *if in use in the source Airflow*

### Not supported 

This process supports **Airflow 2.x**. Your source Airflow environment will need to be upgraded prior to migration 
if they are in the **Airflow 1.x** series, and Astronomer Professional services can help you with that process.

:::caution

How do we not have a link for this???

:::

### Step 1: Install Astronomer Starship to MWAA

On the selected source Airflow environment, install the [Astronomer Starship](https://pypi.org/project/astronomer-starship/) migration utility.

This utility will connect to both your source and Astro Airflow deployment to migrate Airflow Connections,
Variables, and assist in migrating your DAGs between instances.

The Starship migration utility can either function as a [plugin](https://github.com/astronomer/starship/tree/master/astronomer-starship) with a user interface, or an Airflow operator if you are migrating from a more restricted Airflow environment. 

Please refer to the table below for compatability:

#### Starship Compatability Matrix

| Source Airflow      | Starship Plugin | Starship Operator |
|---------------------|-----------------|-------------------|
| Airflow 1.x         | ❌               | ❌                 |
| GCC 1 - Airflow 2.x |                 | ☑️                |
| GCC 2 - Airflow 2.x | ☑️              |                   |
| MWAA v2.0.2         |                 | ☑️                |
| MWAA v2.2.2         | ☑️              |                   |
| OSS Airflow VM      | ☑️              |                   |
| Astronomer Nebula   | ☑️              |                   |
| Astronomer Software | ☑️              |                   |

#### Installation 

To install Starship to your Cloud Composer 1 or Cloud Composer 2 instance, you'll modify your instance's `PYPI Packages` tab.
There you can add `astronomer-starship` as an entry by clicking `Edit`.
You can find more [detailed instructions here.](https://cloud.google.com/composer/docs/composer-2/install-python-dependencies)

:::cli
You can accomplish this easily with the `gcloud` CLI, in a terminal:
```sh
# Modify this value:
export GCC_NAME=<GCC_NAME>
gcloud composer environments update $GCC_NAME --update-pypi-package=astronomer-starship
```
:::

<MigrationSteps />