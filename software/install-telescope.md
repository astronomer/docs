---
sidebar_label: 'Install Telescope'
title: 'Install Telescope on Airflow environments'
id: install-telescope
description: Install the Telescope tool to collect Airflow metrics and usage for Astronomer.
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import {siteVariables} from '@site/src/versions';

Telescope is a CLI developed by Astronomer for generating additional metrics from your Airflow environments. It connects directly to Airflow and generates snapshots of your usage and configurations at various points in time. Astronomer uses this information to troubleshoot your environments.

Telescope assumes your current permissions whenever you run a command. If these permissions, Telescope can observe your Airflow environments at a given point in time. Based on what it observes, Telescope generates a report which you can share with Astronomer support.

Astronomer requests that you observe your Deployments with telescope at least once per month. You can additionally observe local projects running with the Astro CLI for troubleshooting purposes.

## Prerequisites

To observe a local environment with Telescope, you need:

- `docker exec` permissions.
- Access to `docker.sock`.
- Python 3.8.
- An Airflow metadata db using Postgresql, Mysql, or Sqlite.

To observe Software Deployments on Kubernetes with Telescope, you need:

- kubectl.
- Permission to list nodes and exec into Pods.

## Install the Telescope CLI

Depending on where you want to run Telescope, install the CLI on a system that has permissions for either Docker or your Software Kubernetes cluster.

<Tabs
    defaultValue="binary"
    values={[
        {label: 'Binary', value: 'binary'},
        {label: 'Pip', value: 'pip'},
    ]}>
<TabItem value="binary">

Go to the [**Releases** page of the Telescope GitHub repository](https://github.com/astronomer/telescope/releases). Based on the operating system and CPU architecture of your machine, download one of the `.zip` files for the latest available version of Telescope and make it an executable.

For example, to install Telescope on a Linux machine with x86_64 CPU architecture, you would run:

```sh
wget https://github.com/astronomer/telescope/releases/latest/download/telescope-linux-x86_64
chmod +x telescope-linux-x86_64
```

</TabItem>
<TabItem value="pip">

To install Telescope using pip, run the following command:

```sh
pip install telescope --find-links https://github.com/astronomer/telescope/releases/latest
```

</TabItem>
</Tabs>

## Observe deployed environments

In your Kubernetes cluster, run the following command:

```sh
telescope --kubernetes
```

This command observes all scheduler containers in the cluster and outputs the results of the observation to a file ending in `data.json`.

:::info

By default, Telescope only observes Pods with the label `component=scheduler`. If your Deployments use an alternative label to denote scheduler Pods, use the `--label-selector` selector in your command. For example, if your label for scheduler pods is `role=scheduler`, you would run.  

```sh
--kubernetes --organization-name <your-organization> --label-selector "role=scheduler"
```

:::

## Observe local environments

Open your Astro project and run the following command:

```sh
telescope --docker
```

This command observes scheduler containers on Docker and outputs the results of the observation to a file ending in `data.json`.

## Telescope report data

After Telescope observes an Airflow environment, it generates a file ending in `data.json` with information about the the environment. Some of the report's details include:

- Airflow version
- Provider packages and versions
- Airflow configurations
- The names of Airflow variables, connections, and settings
- DAG and task-level configurations
- Task run usage

Telescope never collects the code of DAGs nor the contents of Airflow configurations such as variables and connections. 

For all report details and functions, see the [Telescope GitHub repository](https://github.com/astronomer/telescope/blob/main/telescope/__main__.py).

## Send Telescope reports to Astronomer support

1. In the [Astronomer support portal](https://support.astronomer.io/), create a ticket called `<Organization-name>: Telescope Results`
2. Attach the `data.json` file that was generated by Telescope to the ticket.

## Advanced configuration

Telescope includes advanced settings for customizing your reports and observing Airflow environments running in containers with custom names. See the [Telescope README](https://github.com/astronomer/telescope) or run `telescope --help` for more information about these settings.
